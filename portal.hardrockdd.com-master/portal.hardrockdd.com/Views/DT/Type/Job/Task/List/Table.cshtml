@*@model  portal.Models.Views.DailyTicket.DailyJobTaskListViewModel
@{
    ViewBag.TableRow = "True";
    var tableId = string.Format("table_{0}", Guid.NewGuid());
    var tableLayout = new TableLayoutModel(this);
    var viewOnly = bool.TryParse(ViewBag.ViewOnly?.ToString(), out bool viewOnlyOut) ? viewOnlyOut : false;
    string tableKey = tableLayout.TableKey;
}
<div class="row">
        <div class="col-12">
            @Html.Partial("../DailyJobTask/AddTask", Model.AddTask)
        </div>

    </div>
<div class="row">
    <div class=" col-12">
        @Html.Partial("../DT/Type/Job/Task/List/AddTask", Model.AddTask)
    </div>
</div>
<table class="table"
       id="@tableId"
       data-urlcreate="@Url.Action("Add", "DailyJobTask")"
       data-urldelete="@Url.Action("Delete", "DailyJobTask")"
       data-urlupdate="@Url.Action("Update", "DailyJobTask")"
       data-urlvalidate="@Url.Action("Validate", "DailyJobTask")"
       data-tablekey="@tableKey">
    <thead>
        <tr>
                <th colspan="4">
                    @Html.Partial("../DailyJobTask/AddTask", Model.AddTask)
                </th>
            </tr>
        <tr>
            <th width="45%">@Html.LabelForRequired(model => model.Tasks.FirstOrDefault().PhaseId)</th>
            <th width="20%">@Html.LabelForRequired(model => model.Tasks.FirstOrDefault().Value)</th>
            <th width="15%">@Html.LabelForRequired(model => model.Tasks.FirstOrDefault().UnitofMeasure)</th>
            <th width="15%">@Html.LabelForRequired(model => model.Tasks.FirstOrDefault().Radius)</th>
                <th width="15%">@Html.LabelForRequired(model => model.Tasks.FirstOrDefault().Hardness)</th>
            @if (!viewOnly)
            {
                <th colspan="3">
                    <button data-placement="left" class="btn btn-primary  pull-right" data-toggle="popover" data-title="Add Task"
                        data-container="body" type="button" data-html="true" href="#" id="AddTask"><i class="fa fa-plus"></i></button>
                    <div class="form-group row">
                            @Html.EditorFor(m => m.AddTask.PhaseId)
                            <button class="btn btn-primary pull-right AddTask"
                                    rel="popover"
                                    type="button"
                                    id="AddTask">
                                <i class="fa fa-plus"></i>
                            </button>
                        </div>
                </th>
            }
        </tr>
    </thead>
    <tbody>
        @{
            var PhaseGroup = Model.Tasks.GroupBy(g => g.LineNum).Select(s => new { LineNum = s.Key, Lines = s.ToList() }).ToList();
        }

        @foreach (var grp in PhaseGroup)
        {
            @Html.Partial("../DT/Type/Job/Task/List/Row/TablePhaseRow", grp.Lines.OrderBy(f => f.CostTypeId).ToList())
        }
    </tbody>
</table>

<script>
    $('#@tableId').on('click', 'button.commentRowBtn', function () {
        var lineNum = $(this).data('linenum');
        var commentElem = $('#@tableId').find('#commentRow_' + lineNum);
        commentElem.show();
        $(this).hide();
    });

</script>*@