@model portal.Models.Views.DailyTicket.DailyJobEmployeeViewModel
@{ 
    var tableLayout = new TableLayoutModel(this);
    var viewOnly = bool.TryParse(ViewBag.ViewOnly?.ToString(), out bool viewOnlyOut) ? viewOnlyOut : false;
    if (Model.Status == DB.DailyTicketStatusEnum.Processed)
    {
        viewOnly = true;
    }
    var entityKey = tableLayout.TableKey;
    var colSpan = viewOnly ? "3" : "4";
}
    <tr data-index="@Model.LineNum" data-entitykey="@entityKey">
        <td>
            @if (Model.AuthDriver == false)
            {
                <span class="fa-stack fa-1x">
                    <i class="fas fa-truck-pickup fa-stack-1x"></i>
                    <i class="fas fa-ban fa-stack-2x" style="color:Tomato"></i>
                </span>
            }
            @Html.HiddenFor(m => m.AuthDriver, new { @id = Guid.NewGuid() })
        </td>
        <td>
            @Html.AntiForgeryToken()
            @Html.HiddenFor(m => m.EntityName, new { @id = Guid.NewGuid() })
            @Html.HiddenFor(m => m.EntityKeyString, new { @id = Guid.NewGuid() })
            @Html.HiddenFor(m => m.DTCo, new { @id = Guid.NewGuid() })
            @Html.HiddenFor(m => m.TicketId, new { @id = Guid.NewGuid() })
            @Html.HiddenFor(m => m.LineNum, new { @id = Guid.NewGuid() })
            @Html.HiddenFor(m => m.Comments, new { @id = Guid.NewGuid() })
            @Html.HiddenFor(m => m.PRCo, new { @id = Guid.NewGuid() })
            @Html.EditorFor(m => m.EmployeeId, new { ViewOnly = viewOnly })
        </td>
        <td>
            @Html.EditorFor(m => m.Hours, new { ViewOnly = viewOnly })
        </td>
        <td>
            @Html.EditorFor(m => m.Perdiem, new { ViewOnly = viewOnly })
        </td>
        @if (!viewOnly)
        {
            <td>
                <div class="btn-group  pull-right">
                    <button class="btn btn-primary commentRowBtn"
                            style="@(String.IsNullOrEmpty(Model.Comments) ? " display: normal;" : "display: none;" )"
                            id="@(" commentRowBtn_" + @Model.LineNum)"
                            data-linenum="@Model.LineNum">
                        <i class="fa fa-comment"></i>
                    </button>
                    <button class="btn btn-danger delRow"
                            data-entitykey="@entityKey">
                        <i class="fa fa-trash"></i>
                    </button>
                </div>
            </td>
        }
    </tr>
<tr class="commentRow"
    id="@("commentRow_" + Model.LineNum.ToString())"

    style="@(!String.IsNullOrEmpty(Model.Comments) ? "display: normal;" : "display: none;")"
    data-entitykey="@entityKey">

    <td colspan="@colSpan" style="border-top-width: 0px; padding-top: 0px;">
        @Html.AntiForgeryToken()


        @Html.HiddenFor(m => m.EntityName, new { @id = Guid.NewGuid() })
        @Html.HiddenFor(m => m.EntityKeyString, new { @id = Guid.NewGuid() })
        @Html.HiddenFor(m => m.DTCo, new { @id = Guid.NewGuid() })
        @Html.HiddenFor(m => m.TicketId, new { @id = Guid.NewGuid() })
        @Html.HiddenFor(m => m.LineNum, new { @id = Guid.NewGuid() })
        @Html.HiddenFor(m => m.PRCo, new { @id = Guid.NewGuid() })
        @Html.HiddenFor(m => m.EmployeeId, new { ViewOnly = viewOnly })

        @Html.HiddenFor(m => m.Hours, new { @id = Guid.NewGuid() })
        @Html.HiddenFor(m => m.Perdiem, new { ViewOnly = viewOnly })

        <div class="form-group has-feedback row" style="margin-bottom: 0px;">
            @Html.EditorFor(m => m.Comments, new { tableRow = "False" })
        </div>
    </td>
</tr>