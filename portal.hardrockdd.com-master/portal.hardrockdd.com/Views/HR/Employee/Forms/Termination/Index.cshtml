@model portal.Models.Views.PR.Employee.Form.PayrollTerminationViewModel

<div class="row">
    <div class="col-12">
        @Html.Partial("../HR/Employee/Forms/Termination/Form/Panel", Model)
    </div>
</div>
<hr />
<div class="pull-right p-r-10">
    <a href="javascript:;" class="btn btn-white" data-dismiss="modal">Close</a>
    <a href="javascript:;"
       class="btn btn-danger btnTermEmp">Send Termination Notice</a>
</div>
<script>
    $('.btnTermEmp')
        .off('click')
        .on('click', function () {
            //console.log('clicked');
            var func = function (button, form) {
                $(button).Busy();
                data = $(form).SerializeForm();
                url = $(form).data('url');
                //console.log(data, url);
                $.post(url, data, function (res) {
                    if (res.success === "true") {
                        //var auditForm = $(document).find('.EMAuditForm');
                        //var panel = $(auditForm).find('panel-reload');
                        $('#termination').modal('hide');
                        //$(panel).click();

                        swal.fire({
                            title: 'Message Sent',
                            text: 'Your Message has been sent to HR and Payroll',
                            icon: 'info',
                            buttons: {
                                confirm: {
                                    text: 'Close',
                                    value: true,
                                    visible: true,
                                    className: 'btn btn-success',
                                    closeModal: true
                                }
                            }
                        });
                    }
                    else {
                        SetValidationErrorForObject($(form), res.errorModel);
                    }
                    $(button).NotBusy();
                });
            }
            var button = this;
            var modal = $(button).closest('.modal-body');
            var form = $(modal).find('form');

            $(form).PostValidate(button, function (valid) {
                console.log("IsValid:", valid);
                if (valid) {
                    func(button, form);
                }
            });
        });
</script>