@model portal.Models.Views.AP.Document.DocumentFormViewModel
@{
    ViewBag.TableRow = "True";
    var tableId = string.Format("table_{0}", Guid.NewGuid());
    var viewOnly = bool.TryParse(ViewBag.ViewOnly?.ToString(), out bool viewOnlyOut) ? viewOnlyOut : false;
    string tableKey = "";
    var seqModel = Model.Sequences.List.FirstOrDefault();
}
<div class="invoice">
    <!-- begin invoice-company -->
    <div class="invoice-company text-inverse f-w-600">
        @*<span class="pull-right hidden-print">
            <a href="javascript:;" class="btn btn-sm btn-white m-b-10 p-l-5"><i class="fa fa-file-pdf t-plus-1 text-danger fa-fw fa-lg"></i> Export as PDF</a>
            <a href="javascript:;" onclick="window.print()" class="btn btn-sm btn-white m-b-10 p-l-5"><i class="fa fa-print t-plus-1 fa-fw fa-lg"></i> Print</a>
        </span>*@
        @seqModel.Vendor
        <span class="pull-right">Total @seqModel.Amount</span>
    </div>
    <!-- end invoice-company -->
    <!-- begin invoice-header -->
    <div class="invoice-header">        
        <div class="invoice-from">
            <small>Info</small>
            <div class="invoice-detail">
                Invoice Date: @seqModel.InvoiceDate.Value.ToShortDateString()<br />
                Ref: @seqModel.APReference<br />
                Posting Month: @seqModel.Mth<br />
                Due Date: @seqModel.DueDate.Value.ToShortDateString()<br />
            </div>
        </div>
    </div>
    <!-- end invoice-header -->
    <!-- begin invoice-content -->
    <div class="invoice-content">
        <!-- begin table-responsive -->
        <div class="table-responsive">
            <table class="table table-invoice">
                <thead>
                    <tr>
                        <th width="5%">#</th>
                        <th class="" width="10%">Type</th>
                        <th class="">Description</th>
                        <th class="text-right" width="10%">Units</th>
                        <th class="text-right" width="10%">Cost</th>
                        <th class="text-right" width="10%">Gross</th>
                        <th class="text-right" width="10%">Taxed</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in seqModel.Lines.List)
                    {
                    <tr>
                        <td class="">@item.LineId</td>
                        <td class="">@item.LineTypeId</td>
                        <td>
                            <span class="text-inverse">@item.Description</span><br />
                            <small>@item.JobId</small>
                        </td>
                        <td class="text-right">@item.Units</td>
                        <td class="text-right">@item.UnitCost</td>
                        <td class="text-right">@(string.Format(AppCultureInfo.CInfo(), "{0:C2}", @item.GrossAmt))</td>
                        <td class="text-right">@(string.Format(AppCultureInfo.CInfo(), "{0:C2}", @item.TaxAmount))</td>
                    </tr>
                    }
                </tbody>
            </table>
        </div>
        <!-- end table-responsive -->
        <!-- begin invoice-price -->
        <div class="invoice-price">
            @{ 
                var totalGross = seqModel.Lines.List.Sum(sum => sum.GrossAmt);
                var totalTax = seqModel.Lines.List.Sum(sum => sum.TaxAmount ?? 0);
                var seqTotal = seqModel.Amount;
            }
            <div class="invoice-price-left">
                <div class="invoice-price-row">
                    <div class="sub-price">
                        <small>SUBTOTAL</small>
                        <span class="text-inverse">@(string.Format(AppCultureInfo.CInfo(), "{0:C2}", totalGross))</span>
                    </div>
                    <div class="sub-price">
                        <i class="fa fa-plus text-muted"></i>
                    </div>
                    <div class="sub-price">
                        <small>TAXES</small>
                        <span class="text-inverse">@(string.Format(AppCultureInfo.CInfo(), "{0:C2}", totalTax))</span>
                    </div>
                    <div class="sub-price">
                        <i class="fas fa-equals text-muted"></i>
                    </div>
                    <div class="sub-price">
                        <small>NET TOTAL</small>
                        <span class="text-inverse">@(string.Format(AppCultureInfo.CInfo(), "{0:C2}", totalGross+ totalTax))</span>
                    </div>
                </div>
            </div>
            <div class="invoice-price-right @((totalGross+ totalTax) - seqTotal != 0 ? "bg-red" : "")">
                <small>TOTAL DIF</small> <span class="f-w-600">@(string.Format(AppCultureInfo.CInfo(), "{0:C2}", seqTotal - (totalGross+ totalTax)))</span>
            </div>
        </div>
        <!-- end invoice-price -->
    </div>
    <!-- end invoice-content -->
</div>