@model portal.Models.Views.AP.CreditCard.Form.ActionViewModel

@{
    var viewOnly = bool.TryParse(ViewBag.ViewOnly?.ToString(), out bool viewOnlyOut) ? viewOnlyOut : false;
    var unSubmitAllowed = bool.TryParse(ViewBag.UnSumbitAllowed?.ToString(), out bool unSumbitAllowedOut) ? unSumbitAllowedOut : false;
    bool partialView = bool.TryParse(ViewBag.Partial?.ToString(), out bool partialViewOut) ? partialViewOut : false;


    var tableLayout = new TableLayoutModel(this);
    var entityKey = tableLayout.TableKey;
}

<div class="row"
     data-co="@Model.CCCo"
     data-id="@Model.TransId">
    <div class="col-lg-12 m-b-10">
        @Html.AntiForgeryToken()
        <div class="">

            <button type="button"
                    class="btn  btn-dark"
                    data-entitykey="@entityKey"
                    data-toggle="modal"
                    data-target="#imageSelect">
                <i class="fas fa-camera"></i> Select/Upload Image
            </button>
            @if (Model.CanForward)
            {
                <button type="button" class="btn btn-warning btnReqAction pull-right"
                        data-url="@Url.Action("RequestInfoStatus","APCreditCardTransaction")"
                        data-co="@Model.CCCo"
                        data-id="@Model.TransId"
                        data-validate="false"
                        data-toggle="modal"
                        data-target="#requestInfoModel">
                    <i class="far fa-info-circle"></i> Request Info
                </button>
            }
        </div>
    </div>
</div>

<script>
    $(document).ready(function(){
        $("#requestInfoModel")
            .off("show.bs.modal")
            .on("show.bs.modal", function (event) {
            // Place the returned HTML into the selected element
            var model = this;
            var button = $(event.relatedTarget);
            var url = $(button).data('url');
            var data = {
                ccco: $(button).data("co"),
                transId: $(button).data("id"),
            };
            //console.log(button, url, data);
            $.ajax({
                type: "Get",
                dataType: "html",
                url: url,
                data: data,
                success: function (res) {
                    $(model).find(".modal-body").html(res);
                },
                error: function (res) {
                    //console.log(res);
                }
            });
        });
        $("#requestInfoModel")
            .off("hide.bs.modal")
            .on("hide.bs.modal", function (event) {
            // Place the returned HTML into the selected element
            $(this).find(".modal-body").html("");
        });
    });
</script>