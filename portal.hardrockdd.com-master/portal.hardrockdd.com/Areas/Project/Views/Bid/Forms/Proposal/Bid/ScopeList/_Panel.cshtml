@model portal.Areas.Project.Models.Bid.Proposal.BidScopeListViewModel
@{
    var panelId = string.Format("panel_{0}", Guid.NewGuid());
    var panelBodyId = string.Format("panel_{0}", Guid.NewGuid());
}

<div class="panel panel-success"
     id="@panelId"
     data-reloadurl="@Url.Action("BidProposalScopeListTable", "Bid", new { bdco = Model.BDCo, bidId = Model.BidId, ScopeTypeId = Model.ScopeTypeId })"
     data-resetscopurl="@Url.Action("BidProposalScopeDefaults", "Bid", new { bdco = Model.BDCo, bidId = Model.BidId, ScopeTypeId = Model.ScopeTypeId })">
    <div class="panel-heading pointer-cursor" data-toggle="collapse" data-target="#@(panelBodyId)">
        <div class="panel-heading-btn">
            <button type="button" class="btn btn-xs btn-white btnreset">Reset @Model.ScopeTypeId.GetDisplayName()</button>
            <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-success" data-click="panel-reload"><i class="fa fa-redo"></i></a>
        </div>
        <div class="panel-title">
            <i class="fa fa-circle fa-fw text-blue mr-2 f-s-8"></i>Bid @Model.ScopeTypeId.GetDisplayName()
        </div>
    </div>
    <div class="panel-body collapse" id="@panelBodyId">
        @Html.Partial("Forms/Proposal/Bid/ScopeList/_Table", Model)
    </div>
</div>

<script>
    $('#@(panelId)').ready(function () {
        var panel = $('#@(panelId)');
        $(panel).on('click', 'button.btnreset', function (e) {
            e.preventDefault();
            e.stopPropagation();
            var url = $(panel).data('resetscopurl');
            var dst = $('#@panelBodyId');
            $.ajax({
                method: "GET",
                url: url,
                beforeSend: function (xhr) {
                    var controllerToken = $(document).find('#controllerTokenId')[0];
                    xhr.setRequestHeader('ControllerTokenId', $(controllerToken).val());
                },
                success: function (res) {
                    //console.log(res);
                    dst.html(res);
                },
                error: function (res) {
                    console.log(res);
                }
            });
        });
    });
</script>